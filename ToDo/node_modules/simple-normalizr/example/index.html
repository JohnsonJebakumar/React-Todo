<html>
<body>
  <script src="../dist/normalizr.min.js"></script>
  <script>

  var schema = normalizr.schema;
  var arrayOf = normalizr.arrayOf;
  var normalize = normalizr.normalize;
  var unionOf = normalizr.unionOf;

function mockObj(nokey){
  newObj={};
  for(var i=0;i<nokey;i++){
    newObj["key"+i]="test"+i
  }
  newObj["id"]=Math.random(100)+"";
  return newObj;
}

var arrObj=[];
var ticketObj={};

for(var i=0;i<100 ;i++){
  ticketObj=mockObj(25);
  ticketObj["contact"]=mockObj(30);
  ticketObj["contact"]["account"]=mockObj(100);
  arrObj.push(ticketObj);
}
console.profile("normalize")
console.time("normalize")
console.log(normalize(arrObj,
  arrayOf(
    schema("tickets",{
      mapping:{
        contact:schema("contacts",{
          mapping:{
            account:schema("accounts")
          }
        })
      }
    })
  )
))
console.timeEnd("normalize")
console.profileEnd()
  </script>
</body>
</html>
