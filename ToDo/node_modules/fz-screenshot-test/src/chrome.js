var webdriver = require('selenium-webdriver');
var By = webdriver.By;
var Until = webdriver.until;
var base64 = require("base64-img");
var path=require("path")

const getBrowser = function (url,seleniumHub,browser) {
	var driver = new webdriver.Builder().forBrowser(browser).usingServer(seleniumHub+'/wd/hub').build();
	driver.get(url).then(function (res) {
	});
	driver.manage().window().setSize(1440,900);
	return driver;
}

const openUrl = function (driver,url) {
	driver.get(url).then(function(res){
	});
}

const getCurrent= function(driver){
	return driver.getCurrentUrl();
}

const takeScreenshot = function (driver,folderName,fileName) {
	driver.takeScreenshot().then(function (res) {
		var filepath = base64.imgSync('data:image/png;base64,'+res,'./screenShots/'+folderName,fileName);
	})
}

const executeScript = function (driver,script) {
	return driver.executeScript(script);
}

module.exports = {
	getBrowser,
	openUrl,
	takeScreenshot,
	executeScript,
	getCurrent
}