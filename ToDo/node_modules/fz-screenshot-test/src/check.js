var spawn= require('cross-spawn');

const hasDiff=function(mainFile,testFile,diffFile)
{
	spawn.sync('mkdir', [diffFile.substr(0,diffFile.lastIndexOf('/'))],{ encoding : 'utf8' })
	var os=process.platform;
	if(os.startsWith('win'))
	{
		var results = spawn.sync('compare', ["-metric", "RMSE",mainFile,testFile,"NULL:"],{ encoding : 'utf8' });
	}
	else
	{
		var results = spawn.sync('compare', ["-metric", "RMSE",mainFile,testFile,"NULL:"],{ encoding : 'utf8' });
	}
 	var diff=(results.output && results.output.filter((d)=>d)[0][0]) || 0;
 	return diff;
}
module.exports = {
	hasDiff
}	